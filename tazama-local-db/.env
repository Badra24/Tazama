# Tazama with External PostgreSQL - Environment Configuration
# Database: badraaji (PostgreSQL 17 - Postgres.app on port 5430)
# Schema: tazama

# ============================================================================
# PostgreSQL Configuration (Local - Postgres.app)
# ============================================================================

POSTGRES_HOST=host.docker.internal
POSTGRES_PORT=5430
POSTGRES_USER=badraaji
POSTGRES_PASSWORD=badraaji

# ============================================================================
# Database URLs - 4 Separate Databases (Tazama Standard)
# ============================================================================

# Configuration Database (rules, typologies, network maps)
CONFIGURATION_DATABASE_URL=postgresql://badraaji:badraaji@host.docker.internal:5430/configuration
CONFIGURATION_DATABASE_HOST=host.docker.internal
CONFIGURATION_DATABASE_PORT=5430
CONFIGURATION_DATABASE_NAME=configuration
CONFIGURATION_DATABASE_USER=badraaji
CONFIGURATION_DATABASE_PASSWORD=badraaji

# Event History Database (transactions, accounts, entities)
EVENT_HISTORY_DATABASE_URL=postgresql://badraaji:badraaji@host.docker.internal:5430/event_history
EVENT_HISTORY_DATABASE_HOST=host.docker.internal
EVENT_HISTORY_DATABASE_PORT=5430
EVENT_HISTORY_DATABASE_NAME=event_history
EVENT_HISTORY_DATABASE_USER=badraaji
EVENT_HISTORY_DATABASE_PASSWORD=badraaji

# Raw History Database (ISO 20022 message storage)
RAW_HISTORY_DATABASE_URL=postgresql://badraaji:badraaji@host.docker.internal:5430/raw_history
RAW_HISTORY_DATABASE_HOST=host.docker.internal
RAW_HISTORY_DATABASE_PORT=5430
RAW_HISTORY_DATABASE_NAME=raw_history
RAW_HISTORY_DATABASE_USER=badraaji
RAW_HISTORY_DATABASE_PASSWORD=badraaji

# Evaluation Database (fraud evaluation results)
EVALUATION_DATABASE_URL=postgresql://badraaji:badraaji@host.docker.internal:5430/evaluation
EVALUATION_DATABASE_HOST=host.docker.internal
EVALUATION_DATABASE_PORT=5430
EVALUATION_DATABASE_NAME=evaluation
EVALUATION_DATABASE_USER=badraaji
EVALUATION_DATABASE_PASSWORD=badraaji

# ============================================================================
# Tazama Version
# ============================================================================

# Use 'rc' for latest development version
# Use specific version like 'v2.0.0' for stable release
TAZAMA_VERSION=rc

# ============================================================================
# NATS Configuration (from Full Stack - proven working)
# ============================================================================

STARTUP_TYPE=nats
SERVER_URL=nats:4222
CONSUMER_STREAM=
PRODUCER_STREAM=event-director
HOST=0.0.0.0
NATS_URL=nats://nats:4222

# ============================================================================
# Valkey/Redis Configuration (from Full Stack - proven working)
# ============================================================================

REDIS_DATABASE=0
REDIS_SERVERS=[{"host":"valkey", "port":6379}]
REDIS_AUTH=
REDIS_IS_CLUSTER=false
DISTRIBUTED_CACHETTL=300
DISTRIBUTED_CACHE_ENABLED=false

# Legacy Redis vars (for compatibility)
REDIS_HOST=valkey
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# Node Cache Configuration
# ============================================================================

LOCAL_CACHETTL=300
LOCAL_CACHE_ENABLED=false

# ============================================================================
# Node Environment (from Full Stack - proven working)
# ============================================================================

NODE_ENV=dev
PORT=3000
MAX_CPU=1
QUOTING=false
SIDECAR_HOST=

# APM
APM_ACTIVE=false
APM_SERVICE_NAME=tms-service
APM_URL=http://apm:8200
APM_SECRET_TOKEN=

# ============================================================================
# TMS Specific (from Full Stack - proven working)
# ============================================================================

FUNCTION_NAME=transaction-monitoring-service
LOG_LEVEL=debug

# Database names - Standard Tazama setup
RAW_HISTORY_DATABASE=raw_history
RAW_HISTORY_DATABASE_CERT_PATH=

EVENT_HISTORY_DATABASE=event_history
EVENT_HISTORY_DATABASE_CERT_PATH=

TRANSACTION_HISTORY_DATABASE=event_history
TRANSACTION_HISTORY_DATABASE_CERT_PATH=
